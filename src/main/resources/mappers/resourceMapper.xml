<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<!-- 자원 네임스페이스(사용영역) 설정 -->
<mapper namespace="com.gsitm.mrs.mappers.ResourceMapper">

	<!-- 지사 목록 조회 -->
	<select id="getWorkplaceList" resultType="Workplace">
		SELECT workplace_no as workplaceNo, name, address 
		FROM Workplace
		ORDER BY workplace_no
	</select>
	
	<!-- 지사 추가 -->
	<insert id="addWorkplace">
		INSERT INTO WORKPLACE(WORKPLACE_NO, NAME, ADDRESS)
		VALUES(Workplace_Seq.nextval, #{name}, #{address})
	</insert>
	
	<!-- 지사 수정 -->
	<update id="editWorkplace">
		UPDATE Workplace 
		SET name = #{name}, address = #{address}
		WHERE workplace_no = #{workplaceNo}
	</update>
	
	<!-- 비품 목록 조회 -->
	<select id="getEquipmentList" resultType="Map">
		SELECT e.equip_no as equipNo, r.name as roomName, e.name as equipName, TO_CHAR(e.buy_date, 'YYYY-MM-DD') as buyDate 
		FROM Equipment e, Room r
		WHERE e.room_no = r.room_no
		ORDER BY e.name, r.room_no
	</select>
	
</mapper>